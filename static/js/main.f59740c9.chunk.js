(this["webpackJsonpmy-notes-app"]=this["webpackJsonpmy-notes-app"]||[]).push([[0],{117:function(e,t,n){"use strict";n.r(t);var a=n(20),r=n(4),o=n(144),c=n(145),s=n(149),i=n(1),l=n(36),u=n.n(l),b=n(11),j=n.n(b),d=n(23),p=n(5),m=n(21),O=n(41),k=n(147),f=n(142),x=n(135),h=n(138),v=n(150),g=n(132),y=n(143),S=n(139),w=n(148),C=n(128),B=n(137),R=n(83),E=n(65),A=n(88),D=n(133),N=n(134),F=n(146),I=n(129),M=n(90),T=n(131),U=n(91),J=n(51),L=j.a.mark(H),q=j.a.mark(V);function H(e){var t,n,a,r;return j.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=new Set,n=Object(J.a)(e),o.prev=2,n.s();case 4:if((a=n.n()).done){o.next=13;break}if(r=a.value,!t.has(r)){o.next=8;break}return o.abrupt("continue",11);case 8:return o.next=10,r;case 10:t.add(r);case 11:o.next=4;break;case 13:o.next=18;break;case 15:o.prev=15,o.t0=o.catch(2),n.e(o.t0);case 18:return o.prev=18,n.f(),o.finish(18);case 21:case"end":return o.stop()}}),L,null,[[2,15,18,21]])}function V(e,t){var n,a,r;return j.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=Object(J.a)(t),o.prev=1,n.s();case 3:if((a=n.n()).done){o.next=9;break}return r=a.value,o.next=7,e(r);case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),n.e(o.t0);case 14:return o.prev=14,n.f(),o.finish(14);case 17:case"end":return o.stop()}}),q,null,[[1,11,14,17]])}function _(e){var t,n=e.name,a=e.url,r=e.description,o=void 0===r?"":r,c=e.tags,s=void 0===c?[]:c,i=(new Date).toISOString();return{id:Object(U.a)(),url:a,name:n,description:o,tags:(t=H(V((function(e){return e.toLowerCase()}),s)),Array.from(t)),createdAt:i,updatedAt:i}}var z=n(34),P=n(125),G=n(126),K=n(68);var Q={Form:function(e){return Object(r.jsx)(K.b,{initialValues:e.initialValues,onSubmit:e.onSubmit,validate:e.validate,render:function(t){var n=t.handleSubmit;return Object(r.jsx)("form",{onSubmit:n,children:e.children})}})},Field:function(e){return Object(r.jsx)(K.a,{name:e.name,render:function(t){var n=t.input,a=t.meta;return Object(r.jsxs)(z.a,{id:e.id,isRequired:e.isRequired,isInvalid:a.touched&&a.error,children:[Object(r.jsx)(P.a,{children:e.label}),e.render(n),Object(r.jsxs)(G.b,{children:[Object(r.jsx)(G.a,{})," ",a.error]})]})}})}},W=Q.Form,X=Q.Field;function Y(e){var t,n,a={};return 0===((null===(t=e.name)||void 0===t?void 0:t.trim())||"").length&&(a.name="Name can not be empty"),0===((null===(n=e.url)||void 0===n?void 0:n.trim())||"").length&&(a.url="URL can not be empty"),a}function Z(e){var t,n,o,c,s=e.title,l=e.bookmark,u=e.isOpen,b=e.onClose,j=e.onSubmit,d=Object(i.useRef)(null);var p={description:null!==(t=null===l||void 0===l?void 0:l.description)&&void 0!==t?t:"",name:null!==(n=null===l||void 0===l?void 0:l.name)&&void 0!==n?n:"",tags:null!==(o=null===l||void 0===l?void 0:l.tags.join(", "))&&void 0!==o?o:"",url:null!==(c=null===l||void 0===l?void 0:l.url)&&void 0!==c?c:""};return Object(r.jsxs)(F.a,{isOpen:u,onClose:b,children:[Object(r.jsx)(F.g,{}),Object(r.jsx)(W,{onSubmit:function(e){var t={name:e.name,description:e.description,url:e.url,tags:e.tags.split(/[\s,]+/).filter(Boolean)};j(l?function(e,t){return Object(a.a)(Object(a.a)(Object(a.a)({},e),t),{},{updatedAt:(new Date).toISOString()})}(l,t):_(t)),b()},initialValues:p,validate:Y,children:Object(r.jsxs)(F.d,{children:[Object(r.jsx)(F.f,{children:s}),Object(r.jsx)(F.c,{}),Object(r.jsx)(F.b,{children:Object(r.jsxs)(v.b,{children:[Object(r.jsx)(X,{name:"name",label:"Name",id:"bookmark-name",isRequired:!0,render:function(e){return Object(r.jsx)(C.a,Object(a.a)({ref:d},e))}}),Object(r.jsx)(X,{name:"url",label:"URL",id:"bookmark-url",isRequired:!0,render:function(e){return Object(r.jsx)(C.a,Object(a.a)({},e))}}),Object(r.jsx)(X,{name:"description",label:"Description",id:"bookmark-description",render:function(e){return Object(r.jsx)(I.a,Object(a.a)({},e))}}),Object(r.jsx)(X,{name:"tags",label:"Tags",id:"bookmark-tags",render:function(e){return Object(r.jsx)(I.a,Object(a.a)({},e))}})]})}),Object(r.jsxs)(F.e,{children:[Object(r.jsx)(M.a,{mr:3,onClick:b,children:"Cancel"}),Object(r.jsx)(M.a,{colorScheme:"blue",type:"submit",children:"Save"})]})]})})]})}function $(e){var t=e.onBookmarkCreate,n=Object(T.a)(),a=n.onClose,o=n.onOpen,c=n.isOpen;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g.a,{"aria-label":"New bookmakr",icon:Object(r.jsx)(D.a,{}),onClick:o}),Object(r.jsx)(Z,{title:"New bookmark",onClose:a,isOpen:c,onSubmit:t})]})}function ee(e){var t=e.bookmark,n=e.onBookmarkUpdate,a=Object(T.a)(),o=a.onClose,c=a.onOpen,s=a.isOpen;return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(g.a,{"aria-label":"New bookmakr",icon:Object(r.jsx)(N.a,{}),onClick:c}),Object(r.jsx)(Z,{title:"Edit bookmark",bookmark:t,onClose:o,isOpen:s,onSubmit:n})]})}var te=n(141),ne=n(136),ae=n(140);function re(e){var t=e.bookmark,n=e.onBookmarkUpdate,a=e.onBookmarkDelete,o=Object(T.a)(),c=o.isOpen,s=o.onOpen,i=o.onClose;return Object(r.jsxs)(x.a,{border:"1px",borderColor:"gray.200",borderRadius:8,px:4,py:2,children:[Object(r.jsxs)(ne.a,{justify:"space-between",children:[Object(r.jsxs)(x.a,{children:[Object(r.jsx)(B.a,{isExternal:!0,href:t.url,children:Object(r.jsx)(h.a,{as:"h3",size:"m",children:t.name})}),Object(r.jsx)(S.a,{mb:1,children:t.description}),Object(r.jsx)(v.a,{children:t.tags.map((function(e){return Object(r.jsx)(ae.a,{size:"sm",children:e},e)}))})]}),Object(r.jsxs)(v.b,{children:[Object(r.jsx)(ee,{bookmark:t,onBookmarkUpdate:n}),Object(r.jsx)(g.a,{"aria-label":"Delete bookmark",icon:Object(r.jsx)(te.a,{}),onClick:s})]})]}),Object(r.jsxs)(F.a,{onClose:i,isOpen:c,children:[Object(r.jsx)(F.g,{}),Object(r.jsxs)(F.d,{children:[Object(r.jsx)(F.f,{children:"Are you sure?"}),Object(r.jsxs)(F.b,{children:["Deleting bookmark: ",Object(r.jsx)("strong",{children:t.name})]}),Object(r.jsxs)(F.e,{children:[Object(r.jsx)(M.a,{onClick:i,mr:3,children:"Cancel"}),Object(r.jsx)(M.a,{colorScheme:"red",onClick:function(){a(t.id),i()},children:"Delete"})]})]})]})]})}var oe=n(66);function ce(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return{version:e,bookmarks:[]}}var se={0:function(e){return e.bookmarks.forEach((function(e){var t=(new Date).toISOString();e.createdAt=e.updatedAt=t})),e.version=1,e}};function ie(e){for(;1!==e.version;){var t,n=Number(null!==(t=e.version)&&void 0!==t?t:0);e=n in se?se[n](e):ce(1)}return e}function le(e){return ue.apply(this,arguments)}function ue(){return(ue=Object(d.a)(j.a.mark((function e(t){var n,a,r,o,c=arguments;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c.length>1&&void 0!==c[1]?c[1]:"Untitled",a=c.length>2?c[2]:void 0,r=new Blob([JSON.stringify(t)],{type:"application/json"}),e.next=5,Object(oe.b)(r,{fileName:n,description:"My bookmarks file",extensions:[".mbms"]},a);case 5:return o=e.sent,e.abrupt("return",{fileHandle:o});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function be(){return je.apply(this,arguments)}function je(){return(je=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(oe.a)({description:"My bookmarks file",extensions:[".mbms"]});case 2:return t=e.sent,e.t0=ie,e.t1=JSON,e.next=7,t.text();case 7:return e.t2=e.sent,e.t3=e.t1.parse.call(e.t1,e.t2),e.t4=(0,e.t0)(e.t3),e.t5=t.name,e.t6=t.handle,e.abrupt("return",{state:e.t4,name:e.t5,handle:e.t6});case 13:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function de(e,t){switch(t.type){case"NewBookmark":return Object(a.a)(Object(a.a)({},e),{},{bookmarks:e.bookmarks.concat(t.payload)});case"UpdateBookmark":var n=e.bookmarks.findIndex((function(e){return e.id===t.payload.id})),r=[].concat(Object(m.a)(e.bookmarks.slice(0,n)),[t.payload],Object(m.a)(e.bookmarks.slice(n+1)));return Object(a.a)(Object(a.a)({},e),{},{bookmarks:r});case"DeleteBookmark":return Object(a.a)(Object(a.a)({},e),{},{bookmarks:e.bookmarks.filter((function(e){return e.id!==t.payload}))});case"SetState":return t.payload}}var pe,me=function(e){var t=e.initialState,n=e.onStateChange,a=Object(i.useReducer)(de,t),o=Object(p.a)(a,2),c=o[0],s=o[1],l=Object(i.useState)(""),u=Object(p.a)(l,2),b=u[0],m=u[1],D=Object(i.useState)(),N=Object(p.a)(D,2),F=N[0],I=N[1],M=Object(i.useState)(!1),T=Object(p.a)(M,2),U=T[0],J=T[1],L=Object(k.a)();Object(i.useEffect)((function(){var e=setTimeout((function(){n(c)}),100);return function(){return clearTimeout(e)}}),[n,c]),Object(i.useEffect)((function(){U&&le(c,null===F||void 0===F?void 0:F.name,F).catch((function(e){e.code!==DOMException.ABORT_ERR&&L({title:"Error",description:e.message,status:"error",isClosable:!0})}))}),[U,F,c,L]);var q=c.bookmarks,H=Object(i.useMemo)((function(){return Object(R.a)(q.slice().sort((function(e,t){return e.updatedAt<t.updatedAt?-1:1})),b,{keys:["name","tags","description"]})}),[b,q]);function V(){return(V=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,be();case 3:t=e.sent,I(t.handle),s({type:"SetState",payload:t.state}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.code!==DOMException.ABORT_ERR&&L({title:"Error",description:e.t0.message,status:"error",isClosable:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}function _(){return(_=Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,le(c,null===F||void 0===F?void 0:F.name,F);case 3:t=e.sent,I(t.fileHandle),L({title:"Saved",description:"Bookmarks saved to "+t.fileHandle.name,status:"success",duration:2e3,isClosable:!0}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),e.t0.code!==DOMException.ABORT_ERR&&L({title:"Error",description:e.t0.message,status:"error",isClosable:!0});case 11:case"end":return e.stop()}}),e,null,[[0,8]])})))).apply(this,arguments)}return Object(r.jsxs)(f.a,{py:8,children:[Object(r.jsxs)(x.a,{as:"header",display:"flex",justifyContent:"space-between",alignItems:"center",mb:2,children:[Object(r.jsx)(h.a,{as:"h1",children:"My bookmarks."}),Object(r.jsxs)(v.a,{children:[Object(r.jsx)(g.a,{"aria-label":"Open file",title:"Open file",icon:Object(r.jsx)(O.a,{as:E.a}),onClick:function(){return V.apply(this,arguments)}}),Object(r.jsx)(g.a,{"aria-label":"Save to file",title:"Save to file",icon:Object(r.jsx)(O.a,{as:E.b}),onClick:function(){return _.apply(this,arguments)}}),Object(r.jsx)($,{onBookmarkCreate:function(e){s({type:"NewBookmark",payload:e})}})]})]}),Object(r.jsx)(y.a,{in:Boolean(F),animateOpacity:!0,children:F&&Object(r.jsxs)(x.a,{display:"flex",justifyContent:"space-between",pb:2,children:[Object(r.jsx)(S.a,{children:F.name}),Object(r.jsx)(w.a,{checked:U,onChange:function(e){return J(e.target.checked)},children:"Autosave"})]})}),Object(r.jsx)(C.a,{placeholder:"Search",value:b,onChange:function(e){return m(e.target.value)},mb:8,mt:8}),0===H.length&&Object(r.jsx)(x.a,{textAlign:"center",color:"gray.500",children:"No bookmarks yet. Let's add the first bookmark!"}),Object(r.jsx)(v.b,{spacing:4,align:"stretch",children:H.map((function(e){return Object(r.jsx)(re,{bookmark:e,onBookmarkUpdate:function(e){return s({type:"UpdateBookmark",payload:e})},onBookmarkDelete:function(e){return s({type:"DeleteBookmark",payload:e})}},e.id)}))}),Object(r.jsx)(x.a,{as:"footer",mt:10,display:"flex",justifyContent:"flex-end",children:Object(r.jsxs)(B.a,{href:"https://github.com/nanot1m/my-bookmarks-app",isExternal:!0,color:"gray.500",children:[Object(r.jsx)(O.a,{as:A.a})," nanot1m"]})})]})},Oe=function(e){e&&e instanceof Function&&n.e(12).then(n.bind(null,161)).then((function(t){var n=t.getCLS,a=t.getFID,r=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),a(e),r(e),o(e),c(e)}))},ke="MyBookmarksAppState",fe={getState:function(){return Object(d.a)(j.a.mark((function e(){var t;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem(ke),e.abrupt("return",t?JSON.parse(t):ce(1));case 2:case"end":return e.stop()}}),e)})))()},setState:function(e){localStorage.setItem(ke,JSON.stringify(e))}},xe=(pe=fe,{getState:function(){return Object(d.a)(j.a.mark((function e(){var t,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,pe.getState();case 3:if(1===(t=e.sent).version){e.next=8;break}return n=ie(t),pe.setState(n),e.abrupt("return",n);case 8:return e.abrupt("return",t);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",ce(1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},setState:function(e){pe.setState(e)}});xe.getState().then((function(e){var t=Object(o.a)({config:{useSystemColorMode:!0}});u.a.render(Object(r.jsxs)(i.StrictMode,{children:[Object(r.jsx)(c.a,{}),Object(r.jsx)(s.a,{theme:t,children:Object(r.jsx)(me,{initialState:e,onStateChange:xe.setState})})]}),document.getElementById("root"))})),window.setTestBookmarks=function(){var e=[_({name:"google",url:"https://www.google.com",description:"big search engine",tags:["google","search"]}),_({name:"instagram",url:"https://www.instagram.com/",description:"share photoes and videos",tags:["photo","video","image","social","media"]}),_({name:"youtube",url:"https://www.youtube.com",tags:["google","video"]})];fe.setState(Object(a.a)(Object(a.a)({},ce(1)),{},{bookmarks:e})),window.location.reload()},Oe()}},[[117,1,2]]]);
//# sourceMappingURL=main.f59740c9.chunk.js.map