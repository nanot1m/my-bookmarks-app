(this["webpackJsonpmy-notes-app"]=this["webpackJsonpmy-notes-app"]||[]).push([[0],{100:function(e,t,n){"use strict";n.r(t);var r=n(11),a=n(2),o=n(0),c=n(45),i=n.n(c),s=n(5),u=n(18),l=n(125),b=n(129),j=n(126),d=n(118),m=n(121),O=n(113),k=n(130),p=n(71),x=n(124),f=n(131),h=n(119),v=n(120),g=n(122),S=n(123),w=n(115),y=n(128),C=n(75),B=n(114),D=n(116),F=n(117),N=n(77),A=n(22),I=n.n(A),R=n(40),U=I.a.mark(E),T=I.a.mark(L);function E(e){var t,n,r,a;return I.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:t=new Set,n=Object(R.a)(e),o.prev=2,n.s();case 4:if((r=n.n()).done){o.next=13;break}if(a=r.value,!t.has(a)){o.next=8;break}return o.abrupt("continue",11);case 8:return o.next=10,a;case 10:t.add(a);case 11:o.next=4;break;case 13:o.next=18;break;case 15:o.prev=15,o.t0=o.catch(2),n.e(o.t0);case 18:return o.prev=18,n.f(),o.finish(18);case 21:case"end":return o.stop()}}),U,null,[[2,15,18,21]])}function L(e,t){var n,r,a;return I.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:n=Object(R.a)(t),o.prev=1,n.s();case 3:if((r=n.n()).done){o.next=9;break}return a=r.value,o.next=7,e(a);case 7:o.next=3;break;case 9:o.next=14;break;case 11:o.prev=11,o.t0=o.catch(1),n.e(o.t0);case 14:return o.prev=14,n.f(),o.finish(14);case 17:case"end":return o.stop()}}),T,null,[[1,11,14,17]])}function M(e){var t,n=e.name,r=e.url,a=e.description,o=void 0===a?"":a,c=e.tags,i=void 0===c?[]:c,s=(new Date).toISOString();return{id:Object(N.a)(),url:r,name:n,description:o,tags:(t=E(L((function(e){return e.toLowerCase()}),i)),Array.from(t)),createdAt:s,updatedAt:s}}var q=n(57),J=n(26),V=n(111),z=n(112);var P={Form:function(e){return Object(a.jsx)(q.b,{initialValues:e.initialValues,onSubmit:e.onSubmit,validate:e.validate,render:function(t){var n=t.handleSubmit;return Object(a.jsx)("form",{onSubmit:n,children:e.children})}})},Field:function(e){return Object(a.jsx)(q.a,{name:e.name,render:function(t){var n=t.input,r=t.meta;return Object(a.jsxs)(J.a,{id:e.id,isRequired:e.isRequired,isInvalid:r.touched&&r.error,children:[Object(a.jsx)(V.a,{children:e.label}),e.render(n),Object(a.jsxs)(z.b,{children:[Object(a.jsx)(z.a,{})," ",r.error]})]})}})}},G=P.Form,H=P.Field,K=function(e){var t,n,r={};return 0===((null===(t=e.name)||void 0===t?void 0:t.trim())||"").length&&(r.name="Name can not be empty"),0===((null===(n=e.url)||void 0===n?void 0:n.trim())||"").length&&(r.url="URL can not be empty"),r};function Q(e){var t,n,c,i,s=e.title,u=e.bookmark,l=e.isOpen,b=e.onClose,j=e.onSubmit,d=Object(o.useRef)(null);return Object(a.jsxs)(y.a,{isOpen:l,onClose:b,children:[Object(a.jsx)(y.g,{}),Object(a.jsx)(G,{onSubmit:function(e){var t={name:e.name,description:e.description,url:e.url,tags:e.tags.split(/[\s,]+/).filter(Boolean)};j(u?Object(r.a)(Object(r.a)({},u),t):M(t)),b()},initialValues:{description:null!==(t=null===u||void 0===u?void 0:u.description)&&void 0!==t?t:"",name:null!==(n=null===u||void 0===u?void 0:u.name)&&void 0!==n?n:"",tags:null!==(c=null===u||void 0===u?void 0:u.tags.join(", "))&&void 0!==c?c:"",url:null!==(i=null===u||void 0===u?void 0:u.url)&&void 0!==i?i:""},validate:K,children:Object(a.jsxs)(y.d,{children:[Object(a.jsx)(y.f,{children:s}),Object(a.jsx)(y.c,{}),Object(a.jsx)(y.b,{children:Object(a.jsxs)(k.b,{children:[Object(a.jsx)(H,{name:"name",label:"Name",id:"bookmark-name",isRequired:!0,render:function(e){return Object(a.jsx)(O.a,Object(r.a)({ref:d},e))}}),Object(a.jsx)(H,{name:"url",label:"URL",id:"bookmark-url",isRequired:!0,render:function(e){return Object(a.jsx)(O.a,Object(r.a)({},e))}}),Object(a.jsx)(H,{name:"description",label:"Description",id:"bookmark-description",render:function(e){return Object(a.jsx)(B.a,Object(r.a)({},e))}}),Object(a.jsx)(H,{name:"tags",label:"Tags",id:"bookmark-tags",render:function(e){return Object(a.jsx)(B.a,Object(r.a)({},e))}})]})}),Object(a.jsxs)(y.e,{children:[Object(a.jsx)(C.a,{mr:3,onClick:b,children:"Cancel"}),Object(a.jsx)(C.a,{colorScheme:"blue",type:"submit",children:"Save"})]})]})})]})}function W(e){var t=e.onBookmarkCreate,n=Object(f.a)(),r=n.onClose,o=n.onOpen,c=n.isOpen;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(w.a,{"aria-label":"New bookmakr",icon:Object(a.jsx)(D.a,{}),onClick:o}),Object(a.jsx)(Q,{title:"New bookmark",onClose:r,isOpen:c,onSubmit:t})]})}function X(e){var t=e.bookmark,n=e.onBookmarkUpdate,r=Object(f.a)(),o=r.onClose,c=r.onOpen,i=r.isOpen;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(w.a,{"aria-label":"New bookmakr",icon:Object(a.jsx)(F.a,{}),onClick:c}),Object(a.jsx)(Q,{title:"Edit bookmark",bookmark:t,onClose:o,isOpen:i,onSubmit:n})]})}function Y(e){var t=e.bookmark,n=e.onBookmarkUpdate,r=e.onBookmarkDelete,o=Object(f.a)(),c=o.isOpen,i=o.onOpen,s=o.onClose;return Object(a.jsxs)(d.a,{border:"1px",borderColor:"gray.200",borderRadius:8,px:4,py:2,children:[Object(a.jsxs)(h.a,{justify:"space-between",children:[Object(a.jsxs)(d.a,{children:[Object(a.jsx)(v.a,{isExternal:!0,href:t.url,children:Object(a.jsx)(m.a,{as:"h3",size:"m",children:t.name})}),Object(a.jsx)(g.a,{mb:1,children:t.description}),Object(a.jsx)(k.a,{children:t.tags.map((function(e){return Object(a.jsx)(S.a,{size:"sm",children:e},e)}))})]}),Object(a.jsxs)(k.b,{children:[Object(a.jsx)(X,{bookmark:t,onBookmarkUpdate:n}),Object(a.jsx)(w.a,{"aria-label":"Delete bookmark",icon:Object(a.jsx)(x.a,{}),onClick:i})]})]}),Object(a.jsxs)(y.a,{onClose:s,isOpen:c,children:[Object(a.jsx)(y.g,{}),Object(a.jsxs)(y.d,{children:[Object(a.jsx)(y.f,{children:"Are you sure?"}),Object(a.jsxs)(y.b,{children:["Deleting bookmark: ",Object(a.jsx)("strong",{children:t.name})]}),Object(a.jsxs)(y.e,{children:[Object(a.jsx)(C.a,{onClick:s,mr:3,children:"Cancel"}),Object(a.jsx)(C.a,{colorScheme:"red",onClick:function(){r(t.id),s()},children:"Delete"})]})]})]})]})}var Z=Object(l.a)({config:{useSystemColorMode:!0}});function $(e,t){switch(t.type){case"NewBookmark":return Object(r.a)(Object(r.a)({},e),{},{bookmarks:e.bookmarks.concat(t.payload)});case"UpdateBookmark":var n=e.bookmarks.findIndex((function(e){return e.id===t.payload.id})),a=[].concat(Object(u.a)(e.bookmarks.slice(0,n)),[t.payload],Object(u.a)(e.bookmarks.slice(n+1)));return Object(r.a)(Object(r.a)({},e),{},{bookmarks:a});case"DeleteBookmark":return Object(r.a)(Object(r.a)({},e),{},{bookmarks:e.bookmarks.filter((function(e){return e.id!==t.payload}))})}}var _=function(e){var t=e.initialState,n=e.onStateChange,r=Object(o.useReducer)($,t),c=Object(s.a)(r,2),i=c[0],u=c[1],l=Object(o.useState)(""),x=Object(s.a)(l,2),f=x[0],h=x[1];Object(o.useEffect)((function(){var e=setTimeout((function(){n(i)}),100);return function(){return clearTimeout(e)}}),[n,i]);var v=i.bookmarks,g=Object(o.useMemo)((function(){return Object(p.a)(v.slice().sort((function(e,t){return e.updatedAt<t.updatedAt?-1:1})),f,{keys:["name","tags","description"]})}),[f,v]);return Object(a.jsx)(b.a,{theme:Z,children:Object(a.jsxs)(j.a,{py:8,children:[Object(a.jsxs)(d.a,{display:"flex",justifyContent:"space-between",alignItems:"center",mb:12,children:[Object(a.jsx)(m.a,{as:"h1",children:"My bookmarks."}),Object(a.jsx)(W,{onBookmarkCreate:function(e){u({type:"NewBookmark",payload:e})}})]}),Object(a.jsx)(O.a,{placeholder:"Search",value:f,onChange:function(e){return h(e.target.value)},mb:8}),Object(a.jsx)(k.b,{spacing:4,align:"stretch",children:g.map((function(e){return Object(a.jsx)(Y,{bookmark:e,onBookmarkUpdate:function(e){return u({type:"UpdateBookmark",payload:e})},onBookmarkDelete:function(e){return u({type:"DeleteBookmark",payload:e})}},e.id)}))})]})})},ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,132)).then((function(t){var n=t.getCLS,r=t.getFID,a=t.getFCP,o=t.getLCP,c=t.getTTFB;n(e),r(e),a(e),o(e),c(e)}))},te=n(127),ne=n(51);function re(e){return{version:e,bookmarks:[]}}var ae={0:function(e){return e.bookmarks.forEach((function(e){var t=(new Date).toISOString();e.createdAt=e.updatedAt=t})),e.version=1,e}};function oe(e){for(;1!==e.version;){var t,n=Number(null!==(t=e.version)&&void 0!==t?t:0);e=n in ae?ae[n](e):re(1)}return e}var ce,ie="MyBookmarksAppState",se={getState:function(){return Object(ne.a)(I.a.mark((function e(){var t;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=localStorage.getItem(ie),e.abrupt("return",t?JSON.parse(t):re(1));case 2:case"end":return e.stop()}}),e)})))()},setState:function(e){localStorage.setItem(ie,JSON.stringify(e))}},ue=(ce=se,{getState:function(){return Object(ne.a)(I.a.mark((function e(){var t,n;return I.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ce.getState();case 3:if(1===(t=e.sent).version){e.next=8;break}return n=oe(t),ce.setState(n),e.abrupt("return",n);case 8:return e.abrupt("return",t);case 11:return e.prev=11,e.t0=e.catch(0),e.abrupt("return",re(1));case 14:case"end":return e.stop()}}),e,null,[[0,11]])})))()},setState:function(){}});ue.getState().then((function(e){i.a.render(Object(a.jsxs)(o.StrictMode,{children:[Object(a.jsx)(te.a,{}),Object(a.jsx)(_,{initialState:e,onStateChange:ue.setState})]}),document.getElementById("root"))})),window.setTestBookmarks=function(){var e=[M({name:"google",url:"https://www.google.com",description:"big search engine",tags:["google","search"]}),M({name:"instagram",url:"https://www.instagram.com/",description:"share photoes and videos",tags:["photo","video","image","social","media"]}),M({name:"youtube",url:"https://www.youtube.com",tags:["google","video"]})];se.setState(Object(r.a)(Object(r.a)({},re(1)),{},{bookmarks:e})),window.location.reload()},ee()}},[[100,1,2]]]);
//# sourceMappingURL=main.e6f9ce4b.chunk.js.map